"use strict";function base64encode(t){var r,a,o,e,n,s;for(o=t.length,a=0,r="";a<o;){if(e=255&t.charCodeAt(a++),a==o){r+=base64EncodeChars.charAt(e>>2),r+=base64EncodeChars.charAt((3&e)<<4),r+="==";break}if(n=t.charCodeAt(a++),a==o){r+=base64EncodeChars.charAt(e>>2),r+=base64EncodeChars.charAt((3&e)<<4|(240&n)>>4),r+=base64EncodeChars.charAt((15&n)<<2),r+="=";break}s=t.charCodeAt(a++),r+=base64EncodeChars.charAt(e>>2),r+=base64EncodeChars.charAt((3&e)<<4|(240&n)>>4),r+=base64EncodeChars.charAt((15&n)<<2|(192&s)>>6),r+=base64EncodeChars.charAt(63&s)}return r}function utf16to8(t){var r,a,o,e;for(r="",o=t.length,a=0;a<o;a++)e=t.charCodeAt(a),e>=1&&e<=127?r+=t.charAt(a):e>2047?(r+=String.fromCharCode(224|e>>12&15),r+=String.fromCharCode(128|e>>6&63),r+=String.fromCharCode(128|e>>0&63)):(r+=String.fromCharCode(192|e>>6&31),r+=String.fromCharCode(128|e>>0&63));return r}function hex_sha1(t){return binb2hex(core_sha1(str2binb(t),t.length*chrsz))}function b64_sha1(t){return binb2b64(core_sha1(str2binb(t),t.length*chrsz))}function str_sha1(t){return binb2str(core_sha1(str2binb(t),t.length*chrsz))}function hex_hmac_sha1(t,r){return binb2hex(core_hmac_sha1(t,r))}function b64_hmac_sha1(t,r){return binb2b64(core_hmac_sha1(t,r))}function str_hmac_sha1(t,r){return binb2str(core_hmac_sha1(t,r))}function sha1_vm_test(){return"a9993e364706816aba3e25717850c26c9cd0d89d"==hex_sha1("abc")}function core_sha1(t,r){t[r>>5]|=128<<24-r%32,t[15+(r+64>>9<<4)]=r;for(var a=Array(80),o=1732584193,e=-271733879,n=-1732584194,s=271733878,i=-1009589776,u=0;u<t.length;u+=16){for(var c=o,l=e,d=n,h=s,f=i,m=0;m<80;m++){a[m]=m<16?t[u+m]:rol(a[m-3]^a[m-8]^a[m-14]^a[m-16],1);var p=safe_add(safe_add(rol(o,5),sha1_ft(m,e,n,s)),safe_add(safe_add(i,a[m]),sha1_kt(m)));i=s,s=n,n=rol(e,30),e=o,o=p}o=safe_add(o,c),e=safe_add(e,l),n=safe_add(n,d),s=safe_add(s,h),i=safe_add(i,f)}return Array(o,e,n,s,i)}function sha1_ft(t,r,a,o){return t<20?r&a|~r&o:t<40?r^a^o:t<60?r&a|r&o|a&o:r^a^o}function sha1_kt(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function core_hmac_sha1(t,r){var a=str2binb(t);a.length>16&&(a=core_sha1(a,t.length*chrsz));for(var o=Array(16),e=Array(16),n=0;n<16;n++)o[n]=909522486^a[n],e[n]=1549556828^a[n];var s=core_sha1(o.concat(str2binb(r)),512+r.length*chrsz);return core_sha1(e.concat(s),672)}function safe_add(t,r){var a=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(a>>16)<<16|65535&a}function rol(t,r){return t<<r|t>>>32-r}function str2binb(t){for(var r=Array(),a=(1<<chrsz)-1,o=0;o<t.length*chrsz;o+=chrsz)r[o>>5]|=(t.charCodeAt(o/chrsz)&a)<<24-o%32;return r}function binb2str(t){for(var r="",a=(1<<chrsz)-1,o=0;o<32*t.length;o+=chrsz)r+=String.fromCharCode(t[o>>5]>>>24-o%32&a);return r}function binb2hex(t){for(var r=hexcase?"0123456789ABCDEF":"0123456789abcdef",a="",o=0;o<4*t.length;o++)a+=r.charAt(t[o>>2]>>8*(3-o%4)+4&15)+r.charAt(t[o>>2]>>8*(3-o%4)&15);return a}function binb2b64(t){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="",o=0;o<4*t.length;o+=3)for(var e=(t[o>>2]>>8*(3-o%4)&255)<<16|(t[o+1>>2]>>8*(3-(o+1)%4)&255)<<8|t[o+2>>2]>>8*(3-(o+2)%4)&255,n=0;n<4;n++)8*o+6*n>32*t.length?a+=b64pad:a+=r.charAt(e>>6*(3-n)&63);return a}function urlsafe(t){var r;return r=base64encode(t),r=r.replace("+","-"),r=r.replace("/","_"),r=r.replace("=",""),r=r.replace("=","")}var base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hexcase=0,b64pad="",chrsz=8;$("button[name=ssrqrcode]").on("click",function(){var t=$(this).attr("label"),r=urlsafe($("#"+t).attr("pass")),a=urlsafe(utf16to8($("#"+t).attr("remarks"))),o=urlsafe($("#"+t).attr("group")),e=urlsafe($("#"+t).attr("data-params")+r+"/?obfsparam=&protoparam=&remarks="+a+"&group="+o+"&udpport="+$("#"+t).attr("port")),e="ssr://"+e;swal.fire({imageUrl:"https://ssready.io/user/qrcode?t="+e,imageWidth:280,imageHeight:280,cancelButtonText:"关闭",showCancelButton:!0,showConfirmButton:!1,width:320,html:"<h4>使用客户端扫码导入节点<h4>"})}),$("button[name=iosqrcode]").on("click",function(){var t=$(this).attr("download");swal.fire({imageUrl:"https://ssready.io/user/qrcode?t="+t,imageWidth:280,imageHeight:280,cancelButtonText:"关闭",showCancelButton:!0,showConfirmButton:!1,width:320,html:"<h4>扫码在线安装<h4>"})}),$("button[name=androidqrcode]").on("click",function(){var t=$(this).attr("download");swal.fire({imageUrl:"https://ssready.io/user/qrcode?t="+t,imageWidth:280,imageHeight:280,cancelButtonText:"关闭",showCancelButton:!0,showConfirmButton:!1,width:320,html:"<h4>扫码下载安装文件<h4>"})}),$("button[name=clashdownload]").on("click",function(){var t=$(this).attr("windows"),r=$(this).attr("macos"),a=$(this).attr("android"),o=$(this).attr("android-play"),e=t.split("?")[1],n=r.split("?")[1],s=a.split("?")[1],i=Swal.fire({title:"选择 Clash 客户端",imageUrl:"https://ssready.io/user/templates/one/assets/img/logos/clash.png",imageWidth:200,imageHeight:200,text:"支持 Windows / MacOS / Android",confirmButtonText:"下载",cancelButtonText:"取消",input:"select",inputOptions:{windows:"Clash for Windows - "+e,macos:"ClashX for MacOS - "+n,android:"Clash for Android - "+s},showCancelButton:!0,inputValidator:function(e){return new Promise(function(n){"windows"===e?(window.location.href=t,n()):"macos"===e?(window.location.href=r,n()):"android"===e&&swal.fire({imageUrl:"https://ssready.io/user/qrcode?t="+a,imageWidth:280,imageHeight:280,confirmButtonText:'<i class="fab fa-google-play"></i> Google Play',denyButtonText:"直接下载",confirmButtonColor:"#000000",denyButtonColor:"#3085d6",showConfirmButton:!0,showDenyButton:!0,showCancelButton:!1,text:"扫码下载安装文件"}).then(function(t){t.isConfirmed?window.location.href=o:t.isDenied&&(window.location.href=a)})})}});i.value}),$("button[name=rulesdownload]").on("click",function(){var t=$(this).attr("pac"),r=$(this).attr("acl"),a=$(this).attr("conf"),o=Swal.fire({title:"选择规则格式",text:"根据客户端选择适用的规则文件格式",confirmButtonText:"确定",cancelButtonText:"取消",input:"select",inputOptions:{pac:"PAC规则 - Windows版SSR",acl:"ACL规则 - Android版SSR",conf:"CONF规则 - Shadowrocket"},showCancelButton:!0,inputValidator:function(o){return new Promise(function(e){"pac"===o?swal.fire({title:"PAC 规则文件",text:"适用于 Windows 版 SSR（pac.txt）",confirmButtonText:"下载文件",showConfirmButton:!0,showCancelButton:!1}).then(function(r){r.isConfirmed&&(window.location.href=t)}):"acl"===o?swal.fire({title:"ACL 规则文件",text:"适用于 Android 版 SSR（list.acl）",confirmButtonText:"复制链接",denyButtonText:"下载文件",showConfirmButton:!0,showDenyButton:!0,showCancelButton:!1,denyButtonColor:"#3085d6"}).then(function(t){t.isConfirmed?($(".rules.hidden").attr("data-clipboard-text",r),$(".rules.hidden").click(),swal.fire({title:"已复制 ACL 文件链接",text:"请在客户端中使用该链接导入规则文件",icon:"success",showConfirmButton:!0,confirmButtonText:"确定"})):t.isDenied&&(window.location.href=r)}):"conf"===o&&swal.fire({title:"CONF 规则文件",imageUrl:"https://ssready.io/user/qrcode?t="+a,imageWidth:280,imageHeight:280,html:"适用于 Shadowrocket（list.conf）<br>支持扫码导入规则",confirmButtonText:"复制链接",denyButtonText:"下载文件",showConfirmButton:!0,showDenyButton:!0,showCancelButton:!1,denyButtonColor:"#3085d6"}).then(function(t){t.isConfirmed?($(".rules.hidden").attr("data-clipboard-text",a),$(".rules.hidden").click(),swal.fire({title:"已复制 CONF 文件链接",text:"请在客户端中使用该链接导入规则文件",icon:"success",showConfirmButton:!0,confirmButtonText:"确定"})):t.isDenied&&(window.location.href=a)})})}});o.value}),$("button[name=subscribe]").on("click",function(){var t=urlsafe(hex_sha1($(this).attr("data-params"))),r=$(this).attr("port"),a=urlsafe($(this).attr("idnum")),t="https://ssready.io/user/subscribe.php?auth="+t+"&id="+a,o=encodeURIComponent(t),e="https://ssready.io/user/subscribe/sub?target=clash&url="+o+"&new_name=true&filename=SSReady_"+r+"&udp=true",n="https://ssready.io/user/subscribe/sub?target=quanx&url="+o+"&new_name=true&filename=SSReady_"+r+"&udp=true",s="https://ssready.io/user/subscribe/sub?target=quan&url="+o+"&new_name=true&filename=SSReady_"+r+"&udp=true",i="https://ssready.io/user/subscribe/sub?target=loon&url="+o+"&new_name=true&filename=SSReady_"+r+"&udp=true",u=Swal.fire({title:"选择订阅类型",html:"根据客户端选择订阅类型<br>支持 SSR / Clash / Quantumult(X) / Loon",confirmButtonText:"确定",cancelButtonText:"取消",input:"select",inputOptions:{ssr:"ShadowsocksR",clash:"Clash",quanx:"QuantumultX",quan:"Quantumult",loon:"Loon"},showCancelButton:!0,inputValidator:function(r){return new Promise(function(a){"ssr"===r?($(".subscribe.hidden").attr("data-clipboard-text",t),$(".subscribe.hidden").click(),Swal.fire({title:"已复制 SSR 订阅链接",text:"请按照教程在客户端中使用订阅导入节点",icon:"success",showConfirmButton:!0,confirmButtonText:"确定"})):"clash"===r?swal.fire({imageUrl:"https://ssready.io/user/templates/one/assets/img/logos/clash.png",imageWidth:200,imageHeight:200,confirmButtonText:"一键导入",denyButtonText:"复制链接",showConfirmButton:!0,showDenyButton:!0,denyButtonColor:"#3085d6",text:"Clash 配置文件导入"}).then(function(t){t.isConfirmed?window.location.href="clash://install-config?url="+encodeURIComponent(e):t.isDenied&&($(".subscribe.hidden").attr("data-clipboard-text",e),$(".subscribe.hidden").click(),swal.fire({title:"已复制 Clash 配置链接",text:"请在 Clash 客户端中使用该链接导入配置文件",icon:"success",showConfirmButton:!0,confirmButtonText:"确定"}))}):"quanx"===r?($(".subscribe.hidden").attr("data-clipboard-text",n),$(".subscribe.hidden").click(),swal.fire({title:"已复制 QuantumultX 配置链接",text:"请在 QuantumultX 客户端中使用该链接导入配置文件",icon:"success",showConfirmButton:!0,confirmButtonText:"确定"})):"quan"===r?($(".subscribe.hidden").attr("data-clipboard-text",s),$(".subscribe.hidden").click(),swal.fire({title:"已复制 Quantumult 配置链接",text:"请在 Quantumult 客户端中使用该链接导入配置文件",icon:"success",showConfirmButton:!0,confirmButtonText:"确定"})):"loon"===r&&($(".subscribe.hidden").attr("data-clipboard-text",i),$(".subscribe.hidden").click(),swal.fire({title:"已复制 Loon 配置链接",text:"请在 Loon 客户端中使用该链接导入配置文件",icon:"success",showConfirmButton:!0,confirmButtonText:"确定"}))})}});u.value}),$("button[name=copyssrlink]").on("click",function(){var t=$(this).attr("label"),r=urlsafe($("#"+t).attr("pass")),a=urlsafe(utf16to8($("#"+t).attr("remarks"))),o=urlsafe($("#"+t).attr("group")),e=urlsafe($("#"+t).attr("data-params")+r+"/?obfsparam=&protoparam=&remarks="+a+"&group="+o+"&udpport="+$("#"+t).attr("port")),e="ssr://"+e;$(this).attr("data-clipboard-text",e),swal.fire({title:"已复制节点链接",text:"请在客户端中通过剪贴板导入",icon:"success",showConfirmButton:!0,confirmButtonText:"确定"})}),$("button[name=importssrlink]").on("click",function(){var t=navigator.userAgent.toLowerCase(),r="ipad"==t.match(/ipad/i),a="iphone os"==t.match(/iphone os/i),o="android"==t.match(/android/i),e="mac os"==t.match(/mac os/i);r||a||o||e?(label=$(this).attr("label"),pass=urlsafe($("#"+label).attr("pass")),remarks=urlsafe(utf16to8($("#"+label).attr("remarks"))),group=urlsafe($("#"+label).attr("group")),str=urlsafe($("#"+label).attr("data-params")+pass+"/?obfsparam=&protoparam=&remarks="+remarks+"&group="+group+"&udpport="+$("#"+label).attr("port")),str="ssr://"+str,window.location.href=str):swal.fire({title:"提示",text:"一键导入仅支持 iOS / Android / MacOS 系统",icon:"info",confirmButtonText:"确定"})}),$("button[name=copyalllink]").on("click",function(){for(var t="",r=$("#all").attr("count"),a=0;a<r;a++)pass=urlsafe($("div[num="+a+"]").attr("pass")),remarks=urlsafe(utf16to8($("div[num="+a+"]").attr("remarks"))),group=urlsafe($("div[num="+a+"]").attr("group")),t+=a!=r-1?"ssr://"+urlsafe($("div[num="+a+"]").attr("data-params")+pass+"/?obfsparam=&protoparam=&remarks="+remarks+"&group="+group+"&udpport="+$("div[num="+a+"]").attr("port"))+"\n":"ssr://"+urlsafe($("div[num="+a+"]").attr("data-params")+pass+"/?obfsparam=&protoparam=&remarks="+remarks+"&group="+group+"&udpport="+$("div[num="+a+"]").attr("port"));$(this).attr("data-clipboard-text",t),swal.fire({title:"已复制节点链接",text:"请在客户端中通过剪贴板导入",icon:"success",showConfirmButton:!0,confirmButtonText:"确定"})}),$("button[name=importalllink]").on("click",function(){var t=navigator.userAgent.toLowerCase(),r="ipad"==t.match(/ipad/i),a="iphone os"==t.match(/iphone os/i),o="android"==t.match(/android/i),e="mac os"==t.match(/mac os/i);if(r||a||o){for(var n="",s=$("#all").attr("count"),i=0;i<s;i++)pass=urlsafe($("div[num="+i+"]").attr("pass")),remarks=urlsafe(utf16to8($("div[num="+i+"]").attr("remarks"))),group=urlsafe($("div[num="+i+"]").attr("group")),n+=i!=s-1?"ssr://"+urlsafe($("div[num="+i+"]").attr("data-params")+pass+"/?obfsparam=&protoparam=&remarks="+remarks+"&group="+group+"&udpport="+$("div[num="+i+"]").attr("port"))+" ":"ssr://"+urlsafe($("div[num="+i+"]").attr("data-params")+pass+"/?obfsparam=&protoparam=&remarks="+remarks+"&group="+group+"&udpport="+$("div[num="+i+"]").attr("port"));window.location.href=n}else if(e){for(var n="",s=$("#all").attr("count"),i=0;i<s;i++)pass=urlsafe($("div[num="+i+"]").attr("pass")),remarks=urlsafe(utf16to8($("div[num="+i+"]").attr("remarks"))),group=urlsafe($("div[num="+i+"]").attr("group")),n+=i!=s-1?"ssr://"+urlsafe($("div[num="+i+"]").attr("data-params")+pass+"/?obfsparam=&protoparam=&remarks="+remarks+"&group="+group+"&udpport="+$("div[num="+i+"]").attr("port"))+"/n":"ssr://"+urlsafe($("div[num="+i+"]").attr("data-params")+pass+"/?obfsparam=&protoparam=&remarks="+remarks+"&group="+group+"&udpport="+$("div[num="+i+"]").attr("port"));window.location.href=n}else swal.fire({title:"提示",text:"一键导入仅支持 iOS / Android / MacOS 系统",icon:"info",confirmButtonText:"确定"})});
